<!-- <p-card header="Create New User">
    <form (ngSubmit)="createUser()" #userForm="ngForm">
        <div class="p-fluid formgrid grid">
            <div class="field col-12 md:col-6">
                <label for="email">Email</label>
                <input id="email" type="email" pInputText [(ngModel)]="user.email" name="email" required />
            </div>

            <div class="field col-12 md:col-6">
                <label for="role">Role</label>
                <p-dropdown [options]="roles" [(ngModel)]="user.role" name="role" placeholder="Select a role" required>
                </p-dropdown>
            </div>

            <div class="field col-12 md:col-6">
                <label for="department">Department</label>
                <input id="department" type="number" pInputText [(ngModel)]="user.departmentId" name="departmentId"
                    required />
            </div>
        </div>

        <button type="submit" pButton label="Create User" [disabled]="!userForm.valid"></button>
    </form>
</p-card> -->
<p-toolbar class="mb-4">
    <ng-template #start>
        <p-button label="New User" icon="pi pi-user-plus" (onClick)="openNew()" />
        <p-button label="Delete" icon="pi pi-trash" severity="danger" (onClick)="deleteSelectedUsers()" [disabled]="!selectedUsers?.length" />
    </ng-template>
</p-toolbar>

<p-table #dt [value]="users()" [(selection)]="selectedUsers" dataKey="id" [paginator]="true" [rows]="10" [globalFilterFields]="['name', 'email']">
    <ng-template pTemplate="header">
        <tr>
            <th><p-tableHeaderCheckbox></p-tableHeaderCheckbox></th>
            <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
            <th>Email</th>
            <th>Role</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
        <tr>
            <td><p-tableCheckbox [value]="user"></p-tableCheckbox></td>
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.role }}</td>
            <td>{{ user.status }}</td>
            <td>
                <p-button icon="pi pi-pencil" class="mr-2" (click)="editUser(user)" />
                <p-button icon="pi pi-trash" severity="danger" (click)="deleteUser(user)" />
            </td>
        </tr>
    </ng-template>
</p-table>

<p-dialog [(visible)]="userDialog" header="User Details" [modal]="true" [style]="{ width: '450px' }">
    <div class="p-fluid">
        <div class="field">
            <label>Name</label>
            <input pInputText [(ngModel)]="user.name" required />
        </div>
        <div class="field">
            <label>Email</label>
            <input pInputText [(ngModel)]="user.email" required />
        </div>
        <div class="field">
            <label>Role</label>
            <p-select [(ngModel)]="user.role" [options]="roles"></p-select>
        </div>
        <div class="field">
            <label>Status</label>
            <p-select [(ngModel)]="user.status" [options]="statuses"></p-select>
        </div>
    </div>
    <ng-template #footer>
        <p-button label="Cancel" icon="pi pi-times" text (click)="hideDialog()" />
        <p-button label="Save" icon="pi pi-check" (click)="saveUser()" />
    </ng-template>
</p-dialog>

<p-confirmdialog></p-confirmdialog>
